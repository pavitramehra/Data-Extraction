{% extends "base.html" %}

{% block content %}

<link rel="stylesheet" type="text/css" href="../static/font-awesome.min.css">



<style>
    .custom-file-upload {
        border: 1px solid #ccc;
        display: inline-block;
        padding: 6px 12px;
        cursor: pointer;
    }
</style>


<script>

    function validateForm() {
        var source_file_text = document.forms["main_form"]["source_file_text"]
        var destination_file_text = document.forms["main_form"]["destination_file_text"]
        if (destination_file_text=="" || source_file_text=="") {
            alert("All fields are mandatory!")
            return false;
        }
        return true;
    }

</script>


<app-root _nghost-c0="" ng-version="7.2.4">
    <div _ngcontent-c0="" class="wrapper">
        <div _ngcontent-c0="" class="login_page welcome-to-neutrino welcome-to-neutrino-core" id="loginApp">
            <div _ngcontent-c0="" class="sys-offers clearfix" id="loginpage">
                <div _ngcontent-c0="" class="block-inline block-c">
                    <div _ngcontent-c0="" class="login_box" id="login_box_id" style="margin: 20px;">
                        <div _ngcontent-c0="" class="cnt_b">

                            

                            <form _ngcontent-c0="" novalidate="" class="ng-pristine ng-valid ng-touched" action = "http://localhost:5000/connect_to_db" method = "POST">
                            
                                <div _ngcontent-c0="" class="btm_b">
                                    <div _ngcontent-c0="" class="formRow">

                                        <!-- Show status -->
                                        <label> {{ Status }}. </label>

                                        &nbsp;&nbsp; 

                                        <!-- Connect to DB button -->
                                        <button _ngcontent-c0="" class="btn btn-secondary" id="loginbutton" type="submit" style="display: inline;"> Connect to DB </button>
                                    </div>
                                </div>
                            
                            </form>
                            

                            <form _ngcontent-c0="" novalidate="" class="ng-pristine ng-valid ng-touched" action = "http://localhost:5000/import_file" method = "POST" id="main_form" name="main_form" onsubmit="return validateForm()">
                                
                                <!-- Source File Label -->
                                <div _ngcontent-c0="" class="formRow">Source File</div>
                                
                                <!-- Source file input -->
                                <div _ngcontent-c0="" class="formRow">
                                    <div _ngcontent-c0="" class="input-group ">



                                        <!-- Source file input text -->
                                        <input _ngcontent-c0="" autocomplete="off" autofocus="autofocus" class="form-control col-sm-12 ng-pristine ng-valid ng-touched" id="source_file_text" name="source_file_text" type="text">

                                        <!-- Source file input button -->
                                        <label for="source_file_upload" class="custom-file-upload" onclick="get_file_path()">
                                            <i class="fa fa-cloud-upload"></i> Browse File
                                        </label>

                                        <script>
                                            function get_file_path(){
                                                const Http = new XMLHttpRequest();
                                                const url = "http://localhost:5000/file_path";
                                                Http.open("GET", url);
                                                Http.send();
                                                Http.onreadystatechange=(e)=>{
                                                    e.preventDefault();
                                                    document.getElementById("source_file_text").value = Http.responseText;   
                                                }
                                            }
                                        </script>
                
                
                                    
                                    </div>
                                </div>
                                
                                <!-- blank line -->
                                <br _ngcontent-c0="">

                                <!-- Destination File label -->
                                <div _ngcontent-c0="" class="formRow">Destination File</div>

                                <!-- Destination file input -->
                                <div _ngcontent-c0="" class="formRow">
                                    <div _ngcontent-c0="" class="input-group">

                                        <!-- Destination file input text -->
                                        <input _ngcontent-c0="" autocomplete="off" autofocus="autofocus" class="form-control col-sm-12 ng-pristine ng-valid ng-touched" id="destination_file_text" name="destination_file_text" type="text">
                                        
                                        <!-- Destination file input button -->
                                        <label for="destination_file_upload" class="custom-file-upload" onclick="get_dir_path()">
                                            <i class="fa fa-cloud-upload"></i> Browse File
                                        </label>

                                        <script>
                                            function get_dir_path(){
                                                const Http = new XMLHttpRequest();
                                                const url = "http://localhost:5000/dir_path";
                                                Http.open("GET", url);
                                                Http.send();
                                                Http.onreadystatechange=(e)=>{
                                                    e.preventDefault();
                                                    document.getElementById("destination_file_text").value = Http.responseText;   
                                                }
                                            }
                                        </script>


                                    </div>
                                </div>
                                
                                <!-- Import button -->
                                <div _ngcontent-c0="" class="btm_b">
                                    <button _ngcontent-c0="" class="btn btn-secondary" id="loginbutton" type="submit" value="Send"> Import data </button>
                                </div>
                            
                            </form>
                        </div>    
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Logo -->
        <div _ngcontent-c0="" class="bottom-footer">
            <div _ngcontent-c0="" class="bottom-top-header">
                <div _ngcontent-c0="" class="nss">
                    <img _ngcontent-c0="" alt="logo-nucleus-software-exports" class="nucleus-logo-gradient" src="../static/images/NucluesLogo_trans_small.png">
                </div>
            </div>
        </div>

    </div>
</app-root>


{% endblock %}